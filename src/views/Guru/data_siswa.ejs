<%- include("./Componen/header") %>
<%- include("./Componen/sidebar") %>

<div class="content-wrapper">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h4>Data Jadwal</h4>
            </div>
        </div>
    </div>
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="tittle bg bg-dark shadow" style="display: flex; justify-content: center; width: 150px; height: 90%; border-radius: 10px;">
                                <h4 class="title-class"></h4>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <div class="body">
                                    <!-- Konten tabel akan dimuat di sini -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Skrip dari AdminLTE dan Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="/plugins/jquery/jquery.min.js"></script>
<script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/dist/js/adminlte.min.js"></script>

<script>
    $(document).ready(function() {
        list();
    });

    function list() {
        let html = "";
        $.ajax({
            url: "/guru/list_siswa",
            type: "GET",
            success: function(result) {
                const val = result.data;
                if (val && val.length > 0) {
                    html += "<table class='table table-bordered table-striped table-hover'>";
                    html += "<thead class='bg-dark'>";
                    html += "<tr>"
                    html += "<th style='width: 1%;'>No</th>";
                    html += "<th>Nis</th>";
                    html += "<th>Nama Siswa</th>";
                    html += "<th>Kelas</th>";
                    html += "<th>Gender</th>";
                    html += "<th>Tahun Ajaran</th>";
                    html += "</tr>";
                    html += "</thead><tbody>";
                    $.each(val, function(index, row) {
                        html += `<tr>`;
                        html += `<td>${index + 1}</td>`;
                        html += `<td>${row.nis}</td>`;
                        html += `<td>${row.nama_siswa}</td>`;
                        html += `<td>${row.nama_kelas}</td>`;
                        html += `<td>${row.jk}</td>`;
                        html += `<td>${row.nama_ajaran}</td>`; <!-- Memperbaiki penggunaan row.nama_ajaran -->
                        html += "</tr>";
                    });
                    html += "</tbody></table>";
                } else {
                    html = "<p>No data available</p>";
                }
                $(".body").html(html);
            },
            error: function(xhr, status, error) {
                console.error("AJAX Error:", status, error);
                $(".body").html("<p>Error loading data</p>");
            }
        });
    }
</script>
</body>
</html>

